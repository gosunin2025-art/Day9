<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모듈화 실습 02</title>
<!-- 
     <link rel="stylesheet" href="style.css">   
-->

    <style>

* {
    font-size: 1.1rem;
}

table {
    width: 600px;
    margin: 20px auto;
    border-collapse: collapse;
    text-align: center;
}

th, td {
    border: 1px solid #000;
    padding: 8px;
}

#button-wrap {
    width: 600px;
    margin: 20px auto;
    text-align: center;
}

button {
    width: 100%;
    padding: 10px;
}

/* 완료 / 미완료 색상 */
.done {
    color: green;
}

.not-done {
    color: red;
}

    </style>
</head>
<body>

    <div id="button-wrap">
        <button id="get-todos">할 일 불러오기</button>
    </div>

    <table class="todos">
        <thead>
            <tr>
                <th>회원 번호</th>
                <th>할 일</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

<!--   <script src="service.js"></script>
    <script src="layout.js"></script>
    <script src="event.js"></script>--> 
</body>

<script>
const todoService = (() => {
    const getList = async (callback) => {
        const response = await fetch(
            "https://jsonplaceholder.typicode.com/todos"
        );
        const todos = await response.json();

        if (callback) {
            callback(todos);
        }
    };

    return { getList };
})();

const todoLayout = (() => {
    const showList = (todos) => {
        const tbody = document.querySelector("table.todos tbody");
        let text = ``;

        // 20개만 출력
        /*
        버튼 클릭 → 할 일 20개 출력
        CSS 적용 사항
        완료된 할 일 → 초록색
        미완료 할 일 → 빨간색
        */
        todos.slice(0, 20).forEach(todo => {
            text += `
                <tr>
                    <td>${todo.userId}</td>
                    <td class="${todo.completed ? 'done' : 'not-done'}">
                        ${todo.title}
                    </td>
                </tr>
            `;
        });

        tbody.innerHTML = text;
    };

    return { showList };
})();


const button = document.getElementById("get-todos");

button.addEventListener("click", () => {
    todoService.getList(todoLayout.showList);
});
</script>
</html>